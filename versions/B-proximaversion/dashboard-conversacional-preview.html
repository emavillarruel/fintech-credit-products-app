<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí¨ Vers√£o B - Dashboard Conversacional</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 0;
        }
        
        .chat-container {
            max-width: 420px;
            margin: 0 auto;
            height: 100vh;
            background: white;
            display: flex;
            flex-direction: column;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }
        
        .chat-header {
            background: linear-gradient(135deg, #3483FA, #4285F4);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 0;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f8f9fa;
        }
        
        .message {
            margin-bottom: 16px;
            animation: fadeInUp 0.4s ease-out;
        }
        
        .bot-message {
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .user-message {
            display: flex;
            justify-content: flex-end;
        }
        
        .bot-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #3483FA, #4285F4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }
        
        .message-bubble {
            max-width: 280px;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
        }
        
        .bot-bubble {
            background: white;
            color: #333;
            border: 1px solid #e1e5e9;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        
        .user-bubble {
            background: #3483FA;
            color: white;
        }
        
        .typing-indicator {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 12px 16px;
            background: white;
            border-radius: 18px;
            border: 1px solid #e1e5e9;
            margin-left: 52px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            background: #999;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        .quick-replies {
            padding: 0 20px 20px;
            background: #f8f9fa;
        }
        
        .quick-reply-button {
            display: block;
            width: 100%;
            padding: 12px 16px;
            margin-bottom: 8px;
            background: white;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            color: #333;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
        }
        
        .quick-reply-button:hover {
            border-color: #3483FA;
            background: #f0f7ff;
        }
        
        .quick-reply-button.selected {
            background: #3483FA;
            color: white;
            border-color: #3483FA;
        }
        
        .recommendation-card {
            background: linear-gradient(135deg, #00A650, #00d66a);
            color: white;
            padding: 20px;
            border-radius: 16px;
            margin: 16px 0;
            text-align: center;
        }
        
        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin: 16px 0;
        }
        
        .comparison-item {
            background: #f8f9fa;
            padding: 12px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid #e1e5e9;
        }
        
        .comparison-item.recommended {
            border-color: #00A650;
            background: #f0fff4;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }
        
        .final-cta {
            background: #00A650;
            color: white;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            cursor: pointer;
            margin: 16px 0;
            transition: background 0.2s ease;
        }
        
        .final-cta:hover {
            background: #008f44;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Chat Header -->
        <div class="chat-header">
            <div class="text-2xl font-bold mb-2">üí¨ Assistente de Cr√©dito</div>
            <div class="text-sm opacity-90">Vou te ajudar a encontrar o produto ideal</div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chatMessages">
            <!-- Initial bot message -->
            <div class="message">
                <div class="bot-message">
                    <div class="bot-avatar">ü§ñ</div>
                    <div class="message-bubble bot-bubble">
                        <div class="font-medium mb-1">Ol√°! üëã</div>
                        <div>Sou seu assistente pessoal de cr√©dito. Vou te ajudar a descobrir qual produto √© perfeito para voc√™, em uma conversa simples e r√°pida.</div>
                        <div class="mt-2 text-sm text-gray-600">Sem termos complicados, sem pressa! üòä</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Replies -->
        <div class="quick-replies" id="quickReplies">
            <button class="quick-reply-button" onclick="startConversation()">
                üöÄ Vamos come√ßar!
            </button>
            <button class="quick-reply-button" onclick="showHelp()">
                ‚ùì Como funciona?
            </button>
        </div>
    </div>

    <script>
        let conversationStep = 0;
        let userNeed = null;
        let userProfile = {
            hasCredit: false,
            frequency: null,
            amount: null,
            urgency: null
        };

        const conversations = {
            step1: {
                bot: "Perfeito! Primeira pergunta bem simples: <br><br><strong>Para que voc√™ precisa de dinheiro?</strong> ü§î",
                options: [
                    { text: "üõí Comprar algo espec√≠fico", value: "BUY_SPECIFIC" },
                    { text: "üí∞ Ter uma quantia dispon√≠vel", value: "HAVE_MONEY" },
                    { text: "üè¢ Investir no meu neg√≥cio", value: "BUSINESS" },
                    { text: "ü§∑‚Äç‚ôÇÔ∏è Ainda n√£o sei bem", value: "UNSURE" }
                ]
            },
            step2: {
                bot: "Entendi! Agora me conta: <br><br><strong>Com que frequ√™ncia voc√™ costuma precisar de cr√©dito?</strong> ÔøΩÔøΩ",
                options: [
                    { text: "üîÑ Frequentemente (todo m√™s)", value: "FREQUENT" },
                    { text: "‚è±Ô∏è De vez em quando", value: "OCCASIONAL" },
                    { text: "üÜï √â minha primeira vez", value: "FIRST_TIME" }
                ]
            },
            step3: {
                bot: "√ìtimo! Uma √∫ltima pergunta: <br><br><strong>Voc√™ prefere...</strong> üéØ",
                options: [
                    { text: "üìä Saber exatamente quanto vou pagar", value: "PREDICTABLE" },
                    { text: "üîÑ Ter flexibilidade para usar quando quiser", value: "FLEXIBLE" },
                    { text: "üí∞ A op√ß√£o mais barata", value: "CHEAPEST" }
                ]
            }
        };

        function addMessage(content, isUser = false, delay = 0) {
            setTimeout(() => {
                const messagesContainer = document.getElementById('chatMessages');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                
                if (isUser) {
                    messageDiv.innerHTML = `
                        <div class="user-message">
                            <div class="message-bubble user-bubble">${content}</div>
                        </div>
                    `;
                } else {
                    messageDiv.innerHTML = `
                        <div class="bot-message">
                            <div class="bot-avatar">ü§ñ</div>
                            <div class="message-bubble bot-bubble">${content}</div>
                        </div>
                    `;
                }
                
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, delay);
        }

        function showTyping(duration = 2000) {
            const messagesContainer = document.getElementById('chatMessages');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message';
            typingDiv.id = 'typing';
            typingDiv.innerHTML = `
                <div class="bot-message">
                    <div class="bot-avatar">ü§ñ</div>
                    <div class="typing-indicator">
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                        <div class="typing-dot"></div>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(typingDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
            
            setTimeout(() => {
                const typing = document.getElementById('typing');
                if (typing) typing.remove();
            }, duration);
        }

        function updateQuickReplies(options) {
            const repliesContainer = document.getElementById('quickReplies');
            repliesContainer.innerHTML = '';
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'quick-reply-button';
                button.innerHTML = option.text;
                button.onclick = () => selectOption(option.text, option.value);
                repliesContainer.appendChild(button);
            });
        }

        function startConversation() {
            addMessage("üöÄ Vamos come√ßar!", true);
            
            showTyping(1500);
            addMessage(conversations.step1.bot, false, 2000);
            
            setTimeout(() => {
                updateQuickReplies(conversations.step1.options);
                conversationStep = 1;
            }, 2500);
        }

        function selectOption(text, value) {
            addMessage(text, true);
            
            // Store user response
            if (conversationStep === 1) {
                userNeed = value;
            } else if (conversationStep === 2) {
                userProfile.frequency = value;
            } else if (conversationStep === 3) {
                userProfile.preference = value;
            }
            
            document.getElementById('quickReplies').innerHTML = '';
            
            // Progress to next step
            if (conversationStep < 3) {
                conversationStep++;
                showTyping(1500);
                addMessage(conversations[`step${conversationStep}`].bot, false, 2000);
                
                setTimeout(() => {
                    updateQuickReplies(conversations[`step${conversationStep}`].options);
                }, 2500);
            } else {
                // Generate recommendation
                generateRecommendation();
            }
        }

        function generateRecommendation() {
            showTyping(2000);
            
            setTimeout(() => {
                addMessage("Perfeito! Baseado no que voc√™ me contou, j√° sei qual √© o produto ideal para voc√™! üéØ", false);
                
                setTimeout(() => {
                    showRecommendation();
                }, 1500);
            }, 2500);
        }

        function showRecommendation() {
            let recommendation = getRecommendation();
            
            const recommendationHTML = `
                <div class="recommendation-card">
                    <div class="text-3xl mb-2">${recommendation.icon}</div>
                    <div class="text-xl font-bold mb-2">RECOMENDO: ${recommendation.name}</div>
                    <div class="text-sm opacity-90">${recommendation.subtitle}</div>
                </div>
                
                <div class="mt-3">
                    <strong>Por que √© perfeito para voc√™:</strong>
                    <div class="mt-2 space-y-1">
                        ${recommendation.reasons.map(reason => `<div class="flex items-start gap-2"><span class="text-green-500">‚úÖ</span><span class="text-sm">${reason}</span></div>`).join('')}
                    </div>
                </div>
            `;
            
            addMessage(recommendationHTML, false, 500);
            
            setTimeout(() => {
                showComparison(recommendation);
            }, 2000);
        }

        function showComparison(recommendation) {
            const comparisonHTML = `
                <div class="mt-3">
                    <strong>Vou te mostrar a diferen√ßa:</strong>
                    <div class="comparison-grid mt-3">
                        <div class="comparison-item ${recommendation.type === 'LC' ? 'recommended' : ''}">
                            <div class="text-lg mb-1">üí≥</div>
                            <div class="text-xs font-semibold">LINHA DE CR√âDITO</div>
                            <div class="text-xs mt-1 text-gray-600">Para compras flex√≠veis</div>
                        </div>
                        <div class="comparison-item ${recommendation.type === 'PL' ? 'recommended' : ''}">
                            <div class="text-lg mb-1">üíµ</div>
                            <div class="text-xs font-semibold">EMPR√âSTIMO</div>
                            <div class="text-xs mt-1 text-gray-600">Para quantia fixa</div>
                        </div>
                    </div>
                </div>
                
                <div class="mt-3 text-sm">
                    <strong>No seu caso espec√≠fico:</strong><br>
                    ${recommendation.explanation}
                </div>
            `;
            
            addMessage(comparisonHTML, false, 500);
            
            setTimeout(() => {
                showFinalMessage(recommendation);
            }, 2000);
        }

        function showFinalMessage(recommendation) {
            const finalHTML = `
                <div class="mt-3">
                    <strong>Ficou claro? üòä</strong>
                    <div class="text-sm mt-2 text-gray-600">
                        Se tiver qualquer d√∫vida, √© s√≥ perguntar! Estou aqui para ajudar.
                    </div>
                </div>
                
                <div class="final-cta mt-4" onclick="proceedWithRecommendation('${recommendation.type}')">
                    ‚úÖ ENTENDI! QUERO ${recommendation.name.toUpperCase()}
                </div>
                
                <div style="text-align: center; margin-top: 12px;">
                    <button onclick="askQuestion()" style="background: none; border: none; color: #3483FA; text-decoration: underline; font-size: 14px; cursor: pointer;">
                        ü§î Tenho uma d√∫vida
                    </button>
                </div>
            `;
            
            addMessage(finalHTML, false, 500);
        }

        function getRecommendation() {
            // Logic based on user responses
            if (userNeed === 'HAVE_MONEY' || userProfile.preference === 'PREDICTABLE') {
                return {
                    type: 'PL',
                    name: 'Empr√©stimo Pessoal',
                    icon: 'üíµ',
                    subtitle: 'Dinheiro na conta com parcelas fixas',
                    reasons: [
                        'Voc√™ quer ter uma quantia fixa dispon√≠vel',
                        'Parcelas previs√≠veis facilitam seu planejamento',
                        'Taxa menor que usar cart√£o de cr√©dito'
                    ],
                    explanation: 'Como voc√™ quer ter dinheiro dispon√≠vel e prefere previsibilidade, o empr√©stimo √© ideal. Voc√™ recebe o valor na conta e paga parcelas fixas.'
                };
            } else if (userNeed === 'BUY_SPECIFIC' || userProfile.frequency === 'FREQUENT' || userProfile.preference === 'FLEXIBLE') {
                return {
                    type: 'LC',
                    name: 'Linha de Cr√©dito',
                    icon: 'üí≥',
                    subtitle: 'Cr√©dito flex√≠vel para suas compras',
                    reasons: [
                        'Voc√™ pode usar quando e quanto quiser',
                        'Paga apenas pelo que usar',
                        'Perfeito para compras no Mercado Livre'
                    ],
                    explanation: 'Como voc√™ quer flexibilidade para compras, a Linha de Cr√©dito √© perfeita. Funciona como um limite que voc√™ usa conforme sua necessidade.'
                };
            } else {
                return {
                    type: 'PL',
                    name: 'Empr√©stimo Pessoal',
                    icon: 'üíµ',
                    subtitle: 'A op√ß√£o mais vers√°til para come√ßar',
                    reasons: [
                        'Ideal para primeira experi√™ncia com cr√©dito',
                        'Valor fixo na conta para usar como quiser',
                        'Parcelas previs√≠veis todo m√™s'
                    ],
                    explanation: 'Para come√ßar, o empr√©stimo √© mais simples. Voc√™ recebe o dinheiro na conta e tem parcelas fixas para pagar.'
                };
            }
        }

        function proceedWithRecommendation(type) {
            addMessage(`‚úÖ Perfeito! Vou te direcionar para contratar seu ${type === 'PL' ? 'Empr√©stimo Pessoal' : 'Linha de Cr√©dito'}.`, false);
            
            setTimeout(() => {
                addMessage("Obrigado por usar nosso assistente! Foi um prazer te ajudar a encontrar o produto ideal! üéâ", false, 1000);
            }, 1000);
        }

        function askQuestion() {
            const question = prompt("Qual √© sua d√∫vida? (Digite aqui)");
            if (question) {
                addMessage(question, true);
                
                showTyping(1500);
                setTimeout(() => {
                    addMessage("Excelente pergunta! Em um produto real, eu teria respostas para todas as suas d√∫vidas. Por enquanto, nossa equipe de especialistas pode te ajudar pelo WhatsApp. üòä", false);
                }, 2000);
            }
        }

        function showHelp() {
            addMessage("‚ùì Como funciona?", true);
            
            showTyping(1500);
            addMessage("√â muito simples! üòä<br><br>Vou fazer algumas perguntas sobre o que voc√™ precisa, e baseado nas suas respostas, vou recomendar o produto de cr√©dito ideal para voc√™.<br><br>N√£o tem pegadinha, nem termos complicados. √â como conversar com um amigo que entende de cr√©dito!", false, 2000);
            
            setTimeout(() => {
                updateQuickReplies([
                    { text: "üöÄ Entendi! Vamos come√ßar", value: "start" }
                ]);
                document.querySelector('.quick-reply-button').onclick = () => startConversation();
            }, 3000);
        }
    </script>
</body>
</html>
